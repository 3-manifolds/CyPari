# https://ci.appveyor.com/project/culler/cypari-mac

branches:
  only:
    - current_pari

image: macOS

environment:
  matrix:
    - PYTHON: /usr/local/bin/python3.8
    - PYTHON: /usr/local/bin/python3.7
  
install:
  - sh: echo ${APPVEYOR_BUILD_WORKER_IMAGE}
  - sh: pwd
  - sh: ls /Users/appveyor
  - sh: ls /usr/local/bin/python*
  - sh: ls /Library/Frameworks/Python.framework/Versions
  - sh: $PYTHON --version

  # Install required python packages
  - sh: $PYTHON -m pip install cython

  # Build CyPari. 
  - sh: ls
  - sh: $PYTHON setup.py build

cache:
  - /Users/appveyor/libcache

build:
  none

test_script:
  - sh: $PYTHON setup.py test
  
after_test:
  - sh: $PYTHON setup.py bdist_wheel

artifacts:
  - path: dist/*.whl

# on_success:
#   You can use this step to upload your artifacts to a public website.
#   See Appveyor's documentation for more details. Or you can simply
#   access your wheels from the Appveyor "artifacts" tab for your build.
