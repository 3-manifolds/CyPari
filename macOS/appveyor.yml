# We use AppVeyor to build our Windows binaries automatically:
#
# https://ci.appveyor.com/project/culler/cypari-mac

branches:
  only:
    - current_pari

image: macOS

clone_folder: ~appveyor/projects

stack: python 3.8

install:

  # Show our build system
  - sh: echo $APPVEYOR_BUILD_WORKER_IMAGE
  - sh: which python

  # Install python packages
  - sh: python -m pip install cython

  # Build CyPari. 
  - sh: cd ~appveyor/projects/CyPari
  - sh: python setup.py build

cache:
  - libcache

build:
  off

test_script:
  # Put your test command here.
  - ps: python setup.py test
  
after_test:
  # This step builds your wheels.
  - ps: python setup.py bdist_wheel"

artifacts:
  # bdist_wheel puts your built wheel in the dist directory
  - path: dist/*.whl

# on_success:
#   You can use this step to upload your artifacts to a public website.
#   See Appveyor's documentation for more details. Or you can simply
#   access your wheels from the Appveyor "artifacts" tab for your build.
